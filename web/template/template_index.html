<html>
	<head>
		<title>New Computer Setup</title>
		<link rel="shortcut icon" href="favicon.ico">
		<script type="text/javascript" src="/eel.js"></script>
		<script type="text/javascript">
        
			async function run() {
				let asset = document.getElementById("asset").value;
				let stack = document.getElementById("stack").value;
				let def_stack = document.getElementById("stack").selectedIndex;
				let user = document.getElementById("user").value;
				let data = document.getElementById("page").innerHTML;
				let confirmation = window.confirm("Run " + stack + " software install on " + asset + "?");
				if (confirmation) {
					alert("Install will take up to MAX_TIME_TO_INSTALL minutes to complete, press \"OK\" to begin.");
					document.getElementById("page").innerHTML = "<h1>Running software install for " + asset + "...</h1>";
					let runInstall = await eel.runInstall(asset, stack, user)();
					document.getElementById("page").innerHTML = data;
					document.getElementById("asset").defaultValue = asset;
					document.getElementById("user").defaultValue = user;
					document.getElementById("stack").selectedIndex = def_stack;
					alert(runInstall);
				}
				else {
					alert("Install cancelled")
				}
			}
        </script>
	</head>
	<body>
		<center id="page">
			<h1>New Computer Setup</h1>
			<p style="font-size:15px">REPLACE_WITH_VERSION_NUM</p><br />
			<img src="computer.png" style="height:50%" />
			<p>Asset Host Name: <input id="asset" type="text" style="width:20%" /></p>
			<p>Owner's Username: <input id="user" type="text" style="width:20%" /></p>
			<label for="stack">Software Stack: </label>
			<select id="stack">
				REPLACE_WITH_STACK_INFO
			</select>
			<br /><br />
			<button onclick="run()">Submit</button>
		</center>
	</body>
</html>